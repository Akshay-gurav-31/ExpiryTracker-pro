<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ExpiryTracker</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="styles/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="images/logo.ico" type="image/x-icon">
    <!-- jsPDF Library for PDF Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
</head>

<body>
    <div class="dashboard-container" style="display: none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg width="40" height="40" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="48" height="48" rx="12" fill="url(#gradient)" />
                        <path
                            d="M24 14C18.48 14 14 18.48 14 24C14 29.52 18.48 34 24 34C29.52 34 34 29.52 34 24C34 18.48 29.52 14 24 14ZM24 30C20.69 30 18 27.31 18 24C18 20.69 20.69 18 24 18C27.31 18 30 20.69 30 24C30 27.31 27.31 30 24 30Z"
                            fill="white" />
                        <path
                            d="M24 20C21.79 20 20 21.79 20 24C20 26.21 21.79 28 24 28C26.21 28 28 26.21 28 24C28 21.79 26.21 20 24 20Z"
                            fill="white" />
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="48" y2="48">
                                <stop offset="0%" stop-color="#667eea" />
                                <stop offset="100%" stop-color="#764ba2" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <span>ExpiryTracker</span>
                </div>
                <div class="logo-subtitle">Track & Manage Expiry Dates</div>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-filter="all">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7" rx="1" />
                        <rect x="14" y="3" width="7" height="7" rx="1" />
                        <rect x="14" y="14" width="7" height="7" rx="1" />
                        <rect x="3" y="14" width="7" height="7" rx="1" />
                    </svg>
                    <span>All Items</span>
                    <span class="count" id="allCount">0</span>
                </a>
                <a href="#" class="nav-item" data-filter="soon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10" />
                        <polyline points="12 6 12 12 16 14" />
                    </svg>
                    <span>Expiring Soon</span>
                    <span class="count" id="soonCount">0</span>
                </a>
                <a href="#" class="nav-item" data-filter="expired">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10" />
                        <line x1="15" y1="9" x2="9" y2="15" />
                        <line x1="9" y1="9" x2="15" y2="15" />
                    </svg>
                    <span>Expired</span>
                    <span class="count" id="expiredCount">0</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile" id="userProfile">
                    <img src="" alt="Avatar" class="user-avatar" id="userAvatar">
                    <div class="user-info">
                        <div class="user-name" id="userName">Loading...</div>
                        <div class="user-email" id="userEmail"></div>
                    </div>
                </div>
                <div class="profile-menu" id="profileMenu">
                    <a href="profile.html" class="menu-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                            <circle cx="12" cy="7" r="4" />
                        </svg>
                        Profile
                    </a>
                    <a href="#" class="menu-item" id="logoutBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                            <polyline points="16 17 21 12 16 7" />
                            <line x1="21" y1="12" x2="9" y2="12" />
                        </svg>
                        Logout
                    </a>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="dashboard-header">
                <div class="header-logo">
                    <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="48" height="48" rx="12" fill="url(#gradient)" />
                        <path
                            d="M24 14C18.48 14 14 18.48 14 24C14 29.52 18.48 34 24 34C29.52 34 34 29.52 34 24C34 18.48 29.52 14 24 14ZM24 30C20.69 30 18 27.31 18 24C18 20.69 20.69 18 24 18C27.31 18 30 20.69 30 24C30 27.31 27.31 30 24 30Z"
                            fill="white" />
                        <path
                            d="M24 20C21.79 20 20 21.79 20 24C20 26.21 21.79 28 24 28C26.21 28 28 26.21 28 24C28 21.79 26.21 20 24 20Z"
                            fill="white" />
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="48" y2="48">
                                <stop offset="0%" stop-color="#667eea" />
                                <stop offset="100%" stop-color="#764ba2" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div>
                        <h1>My Items</h1>
                        <p class="subtitle">Track and manage your expiry dates</p>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="importBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="7 10 12 15 17 10" />
                            <line x1="12" y1="15" x2="12" y2="3" />
                        </svg>
                        Import
                    </button>
                    <button class="btn btn-secondary" id="exportBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="17 8 12 3 7 8" />
                            <line x1="12" y1="3" x2="12" y2="15" />
                        </svg>
                        Export
                    </button>
                    <button class="btn btn-primary" id="addItemBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19" />
                            <line x1="5" y1="12" x2="19" y2="12" />
                        </svg>
                        Add Item
                    </button>
                </div>
            </header>

            <div class="items-grid" id="itemsGrid">
                <!-- Items will be loaded here -->
            </div>

            <div class="empty-state" id="emptyState" style="display: none;">
                <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <line x1="12" y1="8" x2="12" y2="16" />
                    <line x1="8" y1="12" x2="16" y2="12" />
                </svg>
                <h3>No items yet</h3>
                <p>Start tracking your expiry dates by adding your first item</p>
                <button class="btn btn-primary" onclick="document.getElementById('addItemBtn').click()">
                    Add Your First Item
                </button>
            </div>

            <!-- Add/Edit Item Modal -->
            <div class="modal-overlay" id="itemModal">
                <div class="modal">
                    <div class="modal-header">
                        <h2 id="modalTitle">Add New Item</h2>
                        <button class="close-btn" id="closeModal">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18" />
                                <line x1="6" y1="6" x2="18" y2="18" />
                            </svg>
                        </button>
                    </div>
                    <form id="itemForm">
                        <input type="hidden" id="itemId">

                        <div class="form-group">
                            <label for="itemName">Item Name *</label>
                            <div class="input-with-icon">
                                <input type="text" id="itemName" required placeholder="e.g., Milk, Bread">
                                <button type="button" class="icon-btn" id="scanQRBtn" title="Scan QR Code">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                                        <rect x="7" y="7" width="3" height="3" />
                                        <rect x="14" y="7" width="3" height="3" />
                                        <rect x="7" y="14" width="3" height="3" />
                                        <rect x="14" y="14" width="3" height="3" />
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="itemCategory">Category</label>
                                <select id="itemCategory">
                                    <option value="">Select Category</option>
                                    <option value="Dairy">Dairy</option>
                                    <option value="Vegetables">Vegetables</option>
                                    <option value="Fruits">Fruits</option>
                                    <option value="Meat">Meat</option>
                                    <option value="Pantry">Pantry</option>
                                    <option value="Beverages">Beverages</option>
                                    <option value="Medicine">Medicine</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="itemQuantity">Quantity</label>
                                <input type="number" id="itemQuantity" min="1" value="1">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="itemExpiryDate">Expiry Date *</label>
                            <input type="date" id="itemExpiryDate" required>
                        </div>

                        <div class="form-group">
                            <label for="itemNotes">Notes</label>
                            <textarea id="itemNotes" rows="3" placeholder="Add any notes..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Image</label>
                            <div class="image-upload-container">
                                <div id="imagePreview" class="image-preview"></div>
                                <input type="file" id="itemImage" accept="image/*" style="display: none;">
                                <button type="button" class="btn btn-outline" id="uploadImageBtn">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                                        <circle cx="8.5" cy="8.5" r="1.5" />
                                        <polyline points="21 15 16 10 5 21" />
                                    </svg>
                                    Upload Image
                                </button>
                            </div>
                        </div>

                        <div class="modal-actions">
                            <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                            <button type="submit" class="btn btn-primary" id="saveBtn">Save Item</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Hidden File Input for Import -->
            <input type="file" id="importFile" accept=".json" style="display: none;">
        </main>
    </div>

    <script type="module" src="dashboard.js"></script>
</body>

</html>